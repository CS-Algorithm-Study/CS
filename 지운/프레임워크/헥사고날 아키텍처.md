# 헥사고날 아키텍처
## 목차
1. 개념
2. 예제
3. 장단점

---

## 1. 개념
- `계층형 아키텍처` : `관심사 분리` 를 위해 역할에 맞게 계층을 구분하는 구조, 일반적인 사이드프로젝트에서 주로 채택
![계층형](https://velog.velcdn.com/images/jiun2577/post/9f7f25f4-0f5d-4d78-a602-9b28451853c9/image.png)
  > 한계점<br>
  > 1. `자칫 SQL-DD로 빠질 수 있음`<br>
  > - 도메인 계층과 영속성 계층의 **강한 결합** 발생 가능성<br>
  > 2. `규칙에 맞지 않은 지름길을 선택하게 될 수 있음`<br>
  > - 하위 계층에서 상위 계층의 컴포넌트를 접근하기 위해 단순히 상위 계층의 컴포넌트를 하위 계층으로 끌어내림으로써 궁극적으로 **영속성 계층의 크기 증가**<br>
  > 3. `TDD에 부적합`<br>
  > - 한 컴포넌트의 크기가 제한되어 있지 않으므로 하나의 컴포넌트에 한 관심사에 연관된 모든 연산 로직이 들어있어 **테스트 클래스가 난잡**해짐<br>
  > - 한계점 2번의 일례로 웹 계층에서 영속성 계층을 접근하도록 설계하게 되면 테스트 입장에서 도메인 계층 뿐만 아니라 **영속성 계층까지 Mocking**해야 하는 상황 발생<br>
  > 4. `Use Case 파악 어려움`<br>
  > - **간단한 Use Case는** 한계점 2번과 같이 **다른 계층에 끌려다니**게 될 수 있음<br>
  > - 한 컴포넌트의 크기가 제한되어 있지 않으므로 **하나의 서비스에 많은 Use Case가 담겨있어 유지보수가 어려움**<br>
  > 5. `동시 작업 어려움`<br>
  > - 영속성 계층 위에서 모든 개발이 이루어지기 때문에 영속성 > 도메인 > 웹 계층 순으로 개발이 이루어져야 하고 **각 계층에 대한 동시 개발은 어려움**<br>
  > - 한계점 4번과 연계되어, 하나의 서비스에 있는 여러 Use Case를 분업하여 작업하게 되면 **merge conflict** 발생 가능성 증가<br>
    
- `단일 책임 원칙(SRP)` : 한 컴포넌트는 하나의 일만 수행
- `의존성 역전 원칙(DIP)` : 상위 계층이 하위 계층(구체화)에 의존하지 않고, 하위 계층이 상위 계층에서 정의된 추상화 계층에 의존
- `헥사고날 아키텍처` : 위의 규칙을 바탕으로 제안된 `클린 아키텍처` 를 고도화한 아키텍처, 주로 큰 규모의 프로젝트에서 유용
![헥사고날](https://velog.velcdn.com/images/jiun2577/post/16460548-5146-4422-9c35-0a3d34cf2ef5/image.png)
  > **외부와의 접촉을 인터페이스로 추상화**<br>
    - 도메인 비즈니스 로직 안이 외부 라이브러리 및 로직으로부터 자유로움<br>
    - 외부 요소들이 도메인 계층에 의존하도록 하는 형태<br>
## 2. 예제
https://nahwasa.com/entry/%ED%97%A5%EC%82%AC%EA%B3%A0%EB%82%A0-%EC%8A%A4%ED%94%84%EB%A7%81%EB%B6%80%ED%8A%B8-%ED%97%A5%EC%82%AC%EA%B3%A0%EB%82%A0-%EC%95%84%ED%82%A4%ED%85%8D%EC%B3%90-%EC%BD%94%EB%93%9C-%EA%B5%AC%EC%A1%B0

https://tech.osci.kr/hexagonal-architecture/
## 3. 장단점
### 장점
- 외부 요소에 신경쓰지 않고 **도메인 비즈니스 로직에 집중** 가능
- 느슨한 결합으로 인해 **일부 모듈만 배포하는 것이 쉬움**
- 기능에 대한 포트와 사용할 어댑터만 추가하면 **쉽게 기능 확장 가능**
- Mocking 필요성이 줄어들고 **테스트 코드 작성이 쉬움**
- 관심사 분리에 따른, 변경 사항에 대한 대처 속도가 빠르므로 **개발 비용 감소**
### 단점
- 계층 아키텍처에 비해 복잡한 구조를 띠므로 **초기 아키텍처 적용이 어려움**
- 각 계층이 서로 분리되어 있어야 하므로 두 계층이 통신하기 위한 엔티티를 만들어야 하고 매핑 과정이 생기면서 **코드량 증가**
