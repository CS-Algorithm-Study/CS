# 🔸정규화란?

> 이상현상이 있는 릴레이션을 분해해하여 이상현상을 없애는 과정 
이상현상이 존재하는 릴레이션을 분해하여 여러 개의 릴레이션을 생성하게 된다.
이를 단계별로 구분하여 정규형이 높아질 수록 이상현상이 줄어들게 된다.
> 

<br>

## 🫧 제1 정규형 (1NF)

1. 각 컬럼이 하나의 속성만 가져야 한다.
2. 하나의 컬럼은 같은 종류나 타입의 값을 가져야 한다.
3. 각 컬럼이 유일한 이름을 가져야한다.
4. 칼럼의 순서가 상관없어야 한다.

| 학생 번호 | 이름 | 과목 |
| --- | --- | --- |
| 101 | 아이유 | 운영체제, DB |
| 102 | 한효주 | 자바 |

> 해당 테이블은 과목에서 하나만의 속성을 가지고 있지 않음!!
> 
<br>

### 해결

| 학생번호 | 이름 | 과목 |
| --- | --- | --- |
| 101 | 아이유 | 운영체제 |
| 101 | 아이유 | DB |
| 102 | 한효주 | 자바 |

> 칵 칼럼이 원자 값을 갖도록 하면 제1 정규형을 만족할 수 있음
> 
<br>
<br>

## 🫧 제2 정규형 (2NF)

1. 1정규형을 만족해야 한다.
2. 모든 칼럼이 부분적 종속이 없어야 한다. (즉, 모든 칼럼이 완전 함수 종속을 만족해야 한다)

**→ 기본키의 부분집합이 결정자가 되어선 안된다**
<br>

![2](https://github.com/DAHLIACHOI/Algorithm/assets/48826098/8b920860-6190-4e26-a3c1-94b77eef3f66)

> 이 테이블은 (학생번호 + 강좌이름)으로 성적을 결정하고 있다!!
즉, 부분집합 (학생번호 + 강좌이름)이 이 테이블의 기본키가 되고 있다.
하지만 강의실은 강좌이름으로 결정되기 때문에 제2 정규형에 맞지 않다.
> 
<br>

### 해결

![22](https://github.com/DAHLIACHOI/Algorithm/assets/48826098/180bec3d-d930-4437-91d0-4f7e49212033)

> 강의실을 강좌이름이 기본키가 되는 테이블로 따로 분리한다면 제2 정규형을 만족할 수 있다.
> 
<br>
<br>

## 🫧 제3 정규형 (3NF)

1. 제2 정규형을 만족해야 한다.
2. 기본키를 제외한 속성들 간의 이행 종속성이 없어야 한다.

`**이행 종속성` 이란? A→ B가 성립하고, B → C가 성립할 때 A → C가 성립되는 것을 말한다.**
<br>

![3](https://github.com/DAHLIACHOI/Algorithm/assets/48826098/bd30395c-c4d3-4d78-875a-78ab03cd9b4a)

> 이 테이블을 본다면 **학생번호는 강좌이름을 결정**하고 있고 **강좌이름은 수강료를 결정**하고 있다.
즉, 전체적으로 본다면 학생 번호가 수강료를 결정하고 있는 것이다.

만약, 501번 학생이 자료구조 수업을 듣고 싶을 때 이 테이블에서는 501번 학생의 강좌 이름과 수강료 두 번을 모두 수정해야된다.
> 
<br>

### 해결

![33](https://github.com/DAHLIACHOI/Algorithm/assets/48826098/c2f30760-79d6-4890-8e03-370eb70c2b8f)

> 이렇게 나눠서 테이블을 설계한다면 501번 학생이 다른 강의를 듣는다고 하더라도 강좌이름 한 번만 바꾸면 된다.
> 
<br>
<br>

## 🫧 반정규화 (BCNF)

1. 제3 정규형을 만족해야 한다.
2. 모든 결정자가 후보키 집합에 속해야 한다.

**→ 후보키 집합에 없는 칼럼이 결정자가 되어서는 안된다는 뜻**
<br>

![4](https://github.com/DAHLIACHOI/Algorithm/assets/48826098/0aaa0563-9717-484d-89b5-5cd488e7a068)

> 이 테이블에서는 (학생번호 + 과목)으로 지도 교수를 알 수 있다. 
또한, 지도교수 → 과목을 알 수 있다.
하지만 같은 과목을 다른 교수가 가르킬 수도 있어서 과목 → 지도교수는 성립하지 않는다.

지도교수를 통해 과목을 알 수 있는 것처럼 제3 정규형을 만족한 테이블이 후보키 집합이 아닌 칼럼이 결정자가 되어버린 상황이다.
> 
<br>

## 해결

![44](https://github.com/DAHLIACHOI/Algorithm/assets/48826098/a67fe6c4-40f0-4e99-8387-467051d71046)

> 이렇게 두 테이블로 나누면 된다.

이렇게 하면 학생 번호랑 지도교수가 다치 종속성이 발생한다는데 이건 4정규형에서 하는듯…!
근데 4정규형 이상까지 하면 단점들이 너무 많아서 굳이 안하는 것 같다.
> 
<br>
<br>

## ☺️  장점

- 데이터베이스 변경 시 이상현상을 제거할 수 있다.
- 정규화 된 데이터베이스 구조에서는 새로운 데이터 형의 추가로 인한 확장 시, 그 구조를 변경하지 않아도 되거나 일부만 변경해도 된다.
- 데이터베이스와 연동된 응용 프로그램에 최소한 영향만을 미치게 되어 응용프로그램의 생명을 연장시킨다.
<br>

## 😓 단점

- 릴레이션 분해로 인해 릴레이션 간의 JOIN연산이 많아진다.
- 질의에 대한 응답이 느려질 수 있다.
- 데이터의 중복 속성을 제거하고 결정자에 의해 동일한 의미인 일반 속성이 하나의 테이블로 집약되므로 한 테이블의 데이터 용량을 최소화 하는 효과가 있다.
- 따라서 데이터를 처리할 때 속도가 빨라질 수도 있고 느려질 수도 있다.
- 만약에 조인이 많이 발생하면 반정규화를 적용한다.
