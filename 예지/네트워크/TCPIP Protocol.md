# 🔸 TCP/IP란?

- 현재 인터넷에서 사용하는 프로토콜 그룹이다.
- 상호작용하는 모듈로 이루어진 **계층적 프로토콜**이다.

**👉 계층적 프로토콜이란?**

- 상위 계층 프로토콜이 1개 이상의 하위 계층 프로토콜로부터 제공되는 서비스들의 지원을 받는다는 의미

![TCPIP](https://github.com/DAHLIACHOI/Algorithm/assets/48826098/c55a523e-0b39-46b3-a71b-f7bb26c5e59c)

**⚙️ 물리층**

- 데이터 전송 단위는 **Bit**
- 프레임의 각 비트들을 건너편 링크로 전달할 책임이 있음
- 물리층이 가장 아래의 층이긴 하지만 숨겨친 계층인 전송 매체가 물리층 아래에 숨겨져 있기 때문에 물리층 사이의 통신은 논리적 통신
- 두 장치는 전송매체에 의해 연결되며 전송매체는 전기 또는 광학 신호를 전송함

**⚒️ 데이터 링크층**

- 데이터 전송 단위는 **Frame**
- 각 링크층 프로토콜은 각각 다른 서비스를 제공할 수도 있다. (완벽한 오류탐지와 교정 / 오직 오류 교정) → CRC 오류제어가 있는 듯

**📨 네트워크층**

- 데이터 전송 단위는 **Datagram(Packet)**
- Host-to-Host 방식이다.
- 발신지 컴퓨터와 목적지 컴퓨터 사이의 연결을 생성하기 위한 책임을 가짐
- 데이터그램이라는 패킷의 형식을 정의하는 인터넷 프로토콜(IP)를 포함
    - IP는 네트워크층에서 사용되는 주소의 구조와 형식을 정의
    - IP는 흐름 제어, 오류 제어, 혼잡 제어 서비스를 제공하지 않는 비연결형 프로토콜
    - IP는 패킷을 발신지로부터 목적지까지 라우팅할 책임이 있고 해당 경로에 있는 다음 라우터에 데이터그램을 포워딩 하는 각 라우터에 의해 수행됨
    
    > **라우터란?**
    컴퓨티 디바이스와 네트워크를 다른 네트워크에 연결하는 네트워킹 디바이스
    - 경로설정
    - 데이터 전달
    - 로드 밸런싱
    > 
- 보조프로토콜을 가짐
    - 인터넷 제어 메시지 프로토콜 (ICMP)
    - 인터넷 그룹 관리 프로토콜 (IGMP)
    - 동적 호스트 설정 프로토콜 (DHCP)
    - 주소 변환 프로토콜 (ARP)

**📡 전송층**

- 데이터 전송 단위는 **Segment**
- 논리적 연결은 end-to-end (종단 대 종단)
    - 응용층도 end-to-end인데 굳이 전송층이 필요한 이유는 작업과 역할의 분리때문
    - 전송층은 반드시 응용층으로부터 분리되어야 함
- 응용층에 서비스를 제공하기 위한 책임이 있음
- 주로 사용되는 프로토콜은 TCP(Transmission Control Protocol)
    - 데이터를 전송하기 전에 두 호스트의 전송층 사이에 논리적 연결을 설정하는 연결형 프로토콜
    - 흐름 제어, 혼잡 제어, 오류 제어 제공
- UDP(User Datagram Protocol)
    - 처음에 논리적 연결을 설정하지 않고 사용자 데이터그램들을 전송하는 비연결형 프로토콜
    - 흐름 제어, 오류 제어, 혼잡 제어를 제공하지 않음

**💡 응용층**

- 논리적 연결은 end-to-end
- 프로세스간의 통신
- 예시
    - HTTP (Hypertext Transfer Protocol)
    - SMTP (Simple Mail Transfer Protocol)
    - E-MAIL
    - FTP (File Transfer Protocol)
    - TELNET (Terminal Network)
    - SNMP (Simple Network Management Protocol)
    - IGMP (Internet Group Management Protocol)
    - DNS (Domain Name System)

## 💊 캡슐화와 역캡슐화

→ 프로토콜 계층화 할 때 가장 중요한 개념 :  캡슐화

- 발신지에서는 캡슐화
- 목적지에서는 역캡슐화
- 라우터에서는 캡슐화와 역캡슐화

### 발신지 호스트에서의 캡슐화

1. 응용층
    1. 메시지를 전송층에 전송
2. 전송층
    1. 페이로드로 메시지를 받음
    2. 전송층 헤더를 페이로드에 붙임
        1. 통신을 원하는 발신지
        2. 목적지의 응용 식별자
        3. 흐름 제어
        4. 오류 제어
        5. 혼잡 제어 같은 정보가 들어있음
    3. 네트워크 층에 패킷 전송
3. 네트워크층
    1. 패킷을 데이터 또는 페이로드로 받아 자신의 헤더에 페이로드 추가
    2. 헤더는 발신지, 목적지 주소와 헤더의 오류검사, 단편화 정보 등을 위해 사용되는 추가적인 정보를 포함
    3. 데이터링크 층에 프레임 전송
4. 데이터 링크층
    1. 패킷을 데이터 또는 페이로드로 받음
    2. 호스트 또는 다음 라우터의 링크층 주소를 포함하는 자신의 헤더를 추가
    3. 이런 프레임을 물리층에 전송

### 라우터에서 역캡슐화와 캡슐화

![다운로드](https://github.com/DAHLIACHOI/Algorithm/assets/48826098/c358e902-1762-45ee-80c9-507f5b5a3522)

→ 라우터가 2개 또는 그 이상의 링크들과 연결되어 있기 때문에 역캡슐화와 캡슐화가 모두 일어남

1. 데이터링크층
    1. 프레임으로부터 데이터그램을 역캡슐화하여 네트워크층에 보냄
2. 네트워크층
    1. 데이터그램 헤더에서 발신지와 목적지 주소를 조사
    2. 데이터그램이 전송될 다음 라우터를 찾기 위해 포워딩 테이블 조사
    3. 다음 링크의 데이터 링크층으로 전송
3. 다음 링크의 데이터링크층
    1. 프레임에서 데이터그램을 캡슐화하고 전송을 위해 물리층에 보내짐

### 목적지 호스트에서 역캡슐화

- 각 계층은 메시지가 응용층에 도달할 때까지 패킷을 역캡슐화 함
- 페이로드를 떼어내어 그것을 한 단계 높은 프로토콜 계층에 전송하는 역할만 수행
- 오류 검사 필요
